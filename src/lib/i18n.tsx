import React, { createContext, useContext, useEffect, useMemo, useState } from 'react'

type Lang = 'en' | 'fr' | 'rw'

const translations: Record<Lang, Record<string, string>> = {
  en: {
    // Navigation
    'nav.dashboard': 'Dashboard',
    'nav.analysis': 'Analysis',
    'nav.liveAnalysis': 'Live Analysis',
    'nav.schedule': 'Schedule',
    'nav.appointments': 'Appointments',
    'nav.notifications': 'Notifications',
    'nav.history': 'History',
    'nav.profile': 'Profile',
    'nav.settings': 'Settings',
    'nav.users': 'Users',
    'nav.roleRequests': 'Role Requests',
    'nav.stats': 'Statistics',
    'nav.clinics': 'Clinics',
    'nav.billing': 'Billing',
    'nav.devices': 'Devices',
    'nav.logs': 'Logs',
    // Common
    'common.error': 'Error',
    'common.success': 'Success',
    'common.loading': 'Loading...',
    'common.save': 'Save',
    'common.cancel': 'Cancel',
    'common.delete': 'Delete',
    'common.export': 'Export',
    'common.share': 'Share',
    'common.tomorrow': 'Tomorrow',
    'common.noData': 'No data found',
    'common.noResults': 'No results found',
    'common.confirmAction': 'Are you absolutely sure?',
    'common.deleteWarning': 'This action cannot be undone.',
    // Settings
    'settings.title': 'Settings',
    'settings.description': 'Manage your preferences and account settings.',
    'settings.password': 'Password',
    'settings.currentPassword': 'Current Password',
    'settings.newPassword': 'New Password',
    'settings.confirmPassword': 'Confirm New Password',
    'settings.changePassword': 'Change Password',
    'settings.passwordMismatch': 'New passwords do not match',
    'settings.passwordChanged': 'Password changed successfully',
    'settings.failedChangePassword': 'Failed to change password',
    'settings.deleteAccount': 'Delete Account',
    'settings.deleteAccountWarning': 'This action cannot be undone. This will permanently delete your account',
    'settings.enterPassword': 'Enter your password to confirm',
    'settings.accountDeleted': 'Account deleted successfully',
    'settings.failedDeleteAccount': 'Failed to delete account',
    'settings.notifications': 'Notifications',
    'settings.emailNotifications': 'Email Notifications',
    'settings.emailNotificationsDesc': 'Receive notifications via email',
    'settings.pushNotifications': 'Push Notifications',
    'settings.analysisUpdates': 'Analysis Updates',
    'settings.marketingEmails': 'Marketing Emails',
    'settings.marketingEmailsDesc': 'Receive marketing and promotional emails',
    'settings.appearance': 'Appearance',
    'settings.theme': 'Theme',
    'settings.fontSize': 'Font Size',
    'settings.reducedMotion': 'Reduced Motion',
    'settings.language': 'Language',
    'settings.dateFormat': 'Date Format',
    'settings.timeFormat': 'Time Format',
    'settings.dangerZone': 'Danger Zone',
    // Login
    'login.welcome': 'Welcome Back',
    'login.subtitle': 'Sign in to your account',
    'login.forgot': 'Forgot password?',
    'login.signin': 'Sign In',
    // Private
    'private.incorrectPassword': 'Incorrect password',
    // Register
    'register.title': 'Create Account',
    'register.subtitle': 'Join the world of neuroscience with Artificial Intelligence',
    // Not Found
    'notfound.return': 'Return to Reality',
    'notfound.message': "⚡ Uh-oh! Your EEG signals have drifted into the neural abyss. We couldn't find this page.",
    // History
    'history.title': 'Analysis History',
    'history.description': 'Browse your past EEG sessions and review performance metrics.',
    'history.noSessions': 'No sessions found',
    'history.searchPlaceholder': 'Search sessions...',
    'history.failedFetch': 'Failed to fetch session history',
    // Appointments
    'appointments.title': 'Appointment Requests',
    'appointments.suggest': 'Suggest Date',
    'appointments.accept': 'Accept',
    'appointments.decline': 'Decline',
    'appointments.reject': 'Reject',
    'appointments.noAppointments': 'No appointments found',
    'appointments.accepted': 'Appointment accepted',
    'appointments.declined': 'Appointment declined',
    'appointments.failedAccept': 'Failed to accept appointment',
    'appointments.failedDecline': 'Failed to decline appointment',
    'appointments.acceptedSuccess': 'Appointment accepted',
    'appointments.acceptedError': 'Failed to accept appointment',
    'appointments.declinedSuccess': 'Appointment declined',
    'appointments.declinedError': 'Failed to decline appointment',
    'appointments.status.pending': 'Pending',
    'appointments.status.accepted': 'Accepted',
    'appointments.status.declined': 'Declined',
    'appointments.status.cancelled': 'Cancelled',
    'appointments.status.completed': 'Completed',
    'appointments.email': 'Email',
    // Dashboard
    'dashboard.welcome': 'Welcome back,',
    'dashboard.cards.totalAnalyses': 'Total Analyses',
    'dashboard.cards.activities': 'Activities',
    'dashboard.cards.reports': 'Reports',
    'dashboard.cards.sessions': 'Sessions',
    'dashboard.recent.title': 'Recent Analysis',
    'dashboard.recent.desc': 'Your latest EEG data processing results',
    'dashboard.upcoming.title': 'Upcoming Sessions',
    'dashboard.upcoming.desc': 'Scheduled data collection',
    'dashboard.session': 'Session',
    // Analysis
    'analysis.title': 'Analysis Tools',
    'analysis.description': 'Upload your EEG data or view previous analysis results. Maximum of 100MB per file.',
    'analysis.upload': 'Upload',
    'analysis.results': 'Results',
    'analysis.uploadHeader': 'Upload your EEG data',
    'analysis.uploadDesc': 'Drag and drop your files here, or click to browse',
    'analysis.analyzing': 'Analyzing...',
    'analysis.selectFiles': 'Select Files',
    'analysis.resultsPlaceholder': 'Your analysis results will appear here.',
    'analysis.submitted': 'Analysis submitted',
    'analysis.submittedDesc': 'Your file is being analyzed. Results will appear below.',
    'analysis.failed': 'Failed to run analysis',
    // Notifications
    'notifications.title': 'Notifications',
    'notifications.description': 'Manage your notifications and alerts',
    'notifications.markAll': 'Mark all as read',
    'notifications.clearAll': 'Clear all',
    'notifications.allNotifications': 'All Notifications',
    'notifications.noNotifications': 'No notifications',
    'notifications.caughtUp': "You're all caught up! Check back later for new updates.",
    'notifications.filter.type.placeholder': 'Filter by type',
    'notifications.filter.type.all': 'All Types',
    'notifications.filter.type.success': 'Success',
    'notifications.filter.type.error': 'Error',
    'notifications.filter.category.placeholder': 'Filter by category',
    'notifications.markAsRead': 'Mark as read',
    'notifications.markedAsRead': 'Marked as read',
    'notifications.allMarkedRead': 'All marked as read',
    'notifications.deleted': 'Notification deleted',
    'notifications.failedFetch': 'Failed to fetch notifications',
    'notifications.failedMarkRead': 'Failed to mark as read',
    'notifications.failedMarkAllRead': 'Failed to mark all as read',
    'notifications.failedDelete': 'Failed to delete notification',
    // Profile
    'profile.title': 'Profile',
    'profile.description': 'Manage your profile information and preferences.',
    'profile.personal': 'Personal Info',
    'profile.security': 'Security',
    'profile.account': 'Account',
    'profile.personalInfoTitle': 'Personal Information',
    'profile.personalInfoDesc': 'Update your personal details and profile picture',
    'profile.fullName': 'Full Name',
    'profile.username': 'Username',
    'profile.email': 'Email',
    'profile.avatar': 'Avatar',
    'profile.saveChanges': 'Save Changes',
    'profile.remove': 'Remove',
    'profile.changePassword': 'Change Password',
    'profile.currentPassword': 'Current Password',
    'profile.newPassword': 'New Password',
    'profile.confirmPassword': 'Confirm New Password',
    'profile.passwordMismatch': 'New passwords do not match',
    'profile.passwordChanged': 'Password changed successfully',
    'profile.failedChangePassword': 'Failed to change password',
    'profile.noChanges': 'No changes to update',
    'profile.updated': 'Profile updated successfully',
    'profile.failedUpdate': 'Failed to update profile',
    'profile.imageTooLarge': 'Image size should be less than 5MB',
    'profile.invalidImage': 'Please upload an image file',
    'profile.dangerZone': 'Danger Zone',
    'profile.deleteAccount': 'Delete Account',
    'profile.deleteWarning': 'This action cannot be undone. This will permanently delete your account',
    'profile.enterPasswordConfirm': 'Enter your password to confirm',
    'profile.accountDeleted': 'Account deleted successfully',
    'profile.failedDeleteAccount': 'Failed to delete account',
    // Schedule
    'schedule.title': 'Schedule Sessions',
    'schedule.description': 'Schedule and manage your EEG analysis sessions',
    'schedule.doctorAvailability': 'Set your availability for patients to book.',
    'schedule.failedSlots': 'Failed to fetch available slots',
    'schedule.selectAll': 'Please select a doctor, date, and time',
    'schedule.requestSuccess': 'Appointment requested successfully',
    'schedule.requestFailed': 'Failed to request appointment',
    'schedule.noDoctors': 'No doctors available',
    'schedule.noSlots': 'No available slots for this date',
    'schedule.noAppointments': 'No appointments yet',
    // Private
    'private.title': 'Private Area',
    'private.description': 'Your confidential data and documents.',
    'private.accessButton': 'Access Private Area',
    'private.placeholderMessage': 'Type a secure message...',
    'private.documents': 'Private Documents',
    'private.messages': 'Secure Messages',
    'private.confidentialReport': 'Confidential Report',
    'private.viewDocument': 'View Document',
    'private.documentsDesc': 'Private documents and reports',
    'private.messagesDesc': 'End-to-end encrypted communications',
    // Live Analysis
    'live.title': 'Live EEG Analysis',
    'live.description': 'Real-time monitoring of cognitive metrics',
    'live.startSession': 'Start Session',
    'live.pause': 'Pause',
    'live.resume': 'Resume Session',
    'live.stopSession': 'Stop Session',
    'live.back': 'Back to Home',
    'live.sessionProgress': 'Session Progress',
    'live.recording': 'Recording and analyzing in real-time',
    'live.metricsTimeline': 'Live Metrics Timeline',
    'live.generatingReport': 'Generating Analysis Report',
    'live.processing': 'Please wait while we process your session data and generate insights',
    // Language Switcher
    'lang.en': 'English',
    'lang.fr': 'Français',
    'lang.rw': 'Ikinyarwanda'
  },
  fr: {
    // Navigation
    'nav.users': 'Utilisateurs',
    'nav.roleRequests': 'Demandes de rôle',
    'nav.stats': 'Statistiques',
    'nav.clinics': 'Cliniques',
    'nav.billing': 'Facturation',
    'nav.devices': 'Appareils',
    'nav.appointments': 'Rendez-vous',
    'nav.logs': 'Journaux',
    'nav.dashboard': 'Tableau de bord',
    'nav.analysis': 'Analyse',
    'nav.liveAnalysis': 'Analyse en direct',
    'nav.schedule': 'Planning',
    'nav.notifications': 'Notifications',
    'nav.history': 'Historique',
    'nav.profile': 'Profil',
    'nav.settings': 'Paramètres',
    // Common
    'common.error': 'Erreur',
    'common.success': 'Succès',
    'common.loading': 'Chargement...',
    'common.save': 'Enregistrer',
    'common.cancel': 'Annuler',
    'common.delete': 'Supprimer',
    'common.export': 'Exporter',
    'common.share': 'Partager',
    'common.tomorrow': 'Demain',
    'common.noData': 'Aucune donnée trouvée',
    'common.noResults': 'Aucun résultat trouvé',
    'common.confirmAction': 'Êtes-vous absolument sûr ?',
    'common.deleteWarning': 'Cette action ne peut pas être annulée.',
    // Settings
    'settings.title': 'Paramètres',
    'settings.description': 'Gérez vos préférences et les paramètres de votre compte.',
    'settings.password': 'Mot de passe',
    'settings.currentPassword': 'Mot de passe actuel',
    'settings.newPassword': 'Nouveau mot de passe',
    'settings.confirmPassword': 'Confirmer le nouveau mot de passe',
    'settings.changePassword': 'Changer le mot de passe',
    'settings.passwordMismatch': 'Les nouveaux mots de passe ne correspondent pas',
    'settings.passwordChanged': 'Mot de passe changé avec succès',
    'settings.failedChangePassword': 'Erreur lors du changement du mot de passe',
    'settings.deleteAccount': 'Supprimer le compte',
    'settings.deleteAccountWarning': 'Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte',
    'settings.enterPassword': 'Entrez votre mot de passe pour confirmer',
    'settings.accountDeleted': 'Compte supprimé avec succès',
    'settings.failedDeleteAccount': 'Erreur lors de la suppression du compte',
    'settings.notifications': 'Notifications',
    'settings.emailNotifications': 'Notifications par email',
    'settings.emailNotificationsDesc': 'Recevez des notifications par email',
    'settings.pushNotifications': 'Notifications push',
    'settings.analysisUpdates': 'Mises à jour d\'analyse',
    'settings.marketingEmails': 'Emails marketing',
    'settings.marketingEmailsDesc': 'Recevez des emails marketing et promotionnels',
    'settings.appearance': 'Apparence',
    'settings.theme': 'Thème',
    'settings.fontSize': 'Taille de police',
    'settings.reducedMotion': 'Mouvement réduit',
    'settings.language': 'Langue',
    'settings.dateFormat': 'Format de date',
    'settings.timeFormat': 'Format de l\'heure',
    'settings.dangerZone': 'Zone dangereuse',
    // Login
    'login.welcome': 'Bon retour',
    'login.subtitle': 'Connectez-vous à votre compte',
    'login.forgot': 'Mot de passe oublié ?',
    'login.signin': 'Se connecter',
    // Private
    'private.incorrectPassword': 'Mot de passe incorrect',
    // Register
    'register.title': 'Créer un compte',
    'register.subtitle': 'Rejoignez le monde des neurosciences avec l\'intelligence artificielle',
    // Not Found
    'notfound.return': 'Retour à la réalité',
    'notfound.message': "⚡ Oups ! Vos signaux EEG ont dérivé dans l'abîme neural. Nous n'avons pas trouvé cette page.",
    // History
    'history.title': 'Historique d\'analyse',
    'history.description': 'Parcourez vos sessions EEG passées et consultez les métriques de performance.',
    'history.noSessions': 'Aucune session trouvée',
    'history.searchPlaceholder': 'Rechercher des sessions...',
    'history.failedFetch': 'Erreur lors de la récupération de l\'historique des sessions',
    // Appointments
    'appointments.title': 'Demandes de rendez-vous',
    'appointments.suggest': 'Proposer une date',
    'appointments.accept': 'Accepter',
    'appointments.decline': 'Refuser',
    'appointments.reject': 'Refuser',
    'appointments.noAppointments': 'Aucun rendez-vous trouvé',
    'appointments.accepted': 'Rendez-vous accepté',
    'appointments.declined': 'Rendez-vous refusé',
    'appointments.failedAccept': 'Erreur lors de l\'acceptation du rendez-vous',
    'appointments.failedDecline': 'Erreur lors du refus du rendez-vous',
    'appointments.acceptedSuccess': 'Rendez-vous accepté',
    'appointments.acceptedError': 'Erreur lors de l\'acceptation du rendez-vous',
    'appointments.declinedSuccess': 'Rendez-vous refusé',
    'appointments.declinedError': 'Erreur lors du refus du rendez-vous',
    'appointments.status.pending': 'En attente',
    'appointments.status.accepted': 'Accepté',
    'appointments.status.declined': 'Refusé',
    'appointments.status.cancelled': 'Annulé',
    'appointments.status.completed': 'Complété',
    'appointments.email': 'Email',
    // Dashboard
    'dashboard.welcome': 'Bon retour,',
    'dashboard.cards.totalAnalyses': 'Analyses totales',
    'dashboard.cards.activities': 'Activités',
    'dashboard.cards.reports': 'Rapports',
    'dashboard.cards.sessions': 'Sessions',
    'dashboard.recent.title': 'Analyses récentes',
    'dashboard.recent.desc': 'Vos derniers résultats de traitement EEG',
    'dashboard.upcoming.title': 'Sessions à venir',
    'dashboard.upcoming.desc': 'Collecte de données planifiée',
    'dashboard.session': 'Session',
    // Analysis
    'analysis.title': 'Outils d\'analyse',
    'analysis.description': 'Téléchargez vos données EEG ou consultez les résultats précédents. Taille max: 100MB par fichier.',
    'analysis.upload': 'Téléverser',
    'analysis.results': 'Résultats',
    'analysis.uploadHeader': 'Téléchargez vos données EEG',
    'analysis.uploadDesc': 'Glissez-déposez vos fichiers ici, ou cliquez pour parcourir',
    'analysis.analyzing': 'Analyse en cours...',
    'analysis.selectFiles': 'Sélectionner des fichiers',
    'analysis.resultsPlaceholder': 'Vos résultats d\'analyse apparaîtront ici.',
    'analysis.submitted': 'Analyse soumise',
    'analysis.submittedDesc': 'Votre fichier est en cours d\'analyse. Les résultats apparaîtront ci-dessous.',
    'analysis.failed': 'Erreur lors de l\'exécution de l\'analyse',
    // Notifications
    'notifications.title': 'Notifications',
    'notifications.description': 'Gérez vos notifications et alertes',
    'notifications.markAll': 'Tout marquer comme lus',
    'notifications.clearAll': 'Tout effacer',
    'notifications.allNotifications': 'Toutes les notifications',
    'notifications.noNotifications': 'Aucune notification',
    'notifications.caughtUp': 'Vous êtes à jour ! Revenez plus tard pour les nouvelles mises à jour.',
    'notifications.filter.type.placeholder': 'Filtrer par type',
    'notifications.filter.type.all': 'Tous les types',
    'notifications.filter.type.success': 'Succès',
    'notifications.filter.type.error': 'Erreur',
    'notifications.filter.category.placeholder': 'Filtrer par catégorie',
    'notifications.markAsRead': 'Marquer comme lu',
    'notifications.markedAsRead': 'Marqué comme lu',
    'notifications.allMarkedRead': 'Tous marqués comme lus',
    'notifications.deleted': 'Notification supprimée',
    'notifications.failedFetch': 'Erreur lors de la récupération des notifications',
    'notifications.failedMarkRead': 'Erreur lors du marquage comme lu',
    'notifications.failedMarkAllRead': 'Erreur lors du marquage de tous comme lus',
    'notifications.failedDelete': 'Erreur lors de la suppression de la notification',
    // Profile
    'profile.title': 'Profil',
    'profile.description': 'Gérez les informations de votre profil et vos préférences.',
    'profile.personal': 'Informations personnelles',
    'profile.security': 'Sécurité',
    'profile.account': 'Compte',
    'profile.personalInfoTitle': 'Informations personnelles',
    'profile.personalInfoDesc': 'Mettez à jour vos informations personnelles et votre photo de profil',
    'profile.fullName': 'Nom complet',
    'profile.username': 'Nom d\'utilisateur',
    'profile.email': 'Email',
    'profile.avatar': 'Avatar',
    'profile.saveChanges': 'Enregistrer les modifications',
    'profile.remove': 'Supprimer',
    'profile.changePassword': 'Changer le mot de passe',
    'profile.currentPassword': 'Mot de passe actuel',
    'profile.newPassword': 'Nouveau mot de passe',
    'profile.confirmPassword': 'Confirmer le nouveau mot de passe',
    'profile.passwordMismatch': 'Les nouveaux mots de passe ne correspondent pas',
    'profile.passwordChanged': 'Mot de passe changé avec succès',
    'profile.failedChangePassword': 'Erreur lors du changement du mot de passe',
    'profile.noChanges': 'Aucune modification à mettre à jour',
    'profile.updated': 'Profil mis à jour avec succès',
    'profile.failedUpdate': 'Erreur lors de la mise à jour du profil',
    'profile.imageTooLarge': 'La taille de l\'image doit être inférieure à 5 MB',
    'profile.invalidImage': 'Veuillez télécharger un fichier image',
    'profile.dangerZone': 'Zone dangereuse',
    'profile.deleteAccount': 'Supprimer le compte',
    'profile.deleteWarning': 'Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte',
    'profile.enterPasswordConfirm': 'Entrez votre mot de passe pour confirmer',
    'profile.accountDeleted': 'Compte supprimé avec succès',
    'profile.failedDeleteAccount': 'Erreur lors de la suppression du compte',
    // Schedule
    'schedule.title': 'Planifier des sessions',
    'schedule.description': 'Planifiez et gérez vos sessions d\'analyse EEG',
    'schedule.doctorAvailability': 'Définissez votre disponibilité pour que les patients puissent réserver.',
    'schedule.failedSlots': 'Erreur lors de la récupération des créneaux disponibles',
    'schedule.selectAll': 'Veuillez sélectionner un médecin, une date et une heure',
    'schedule.requestSuccess': 'Rendez-vous demandé avec succès',
    'schedule.requestFailed': 'Erreur lors de la demande de rendez-vous',
    'schedule.noDoctors': 'Aucun médecin disponible',
    'schedule.noSlots': 'Aucun créneau disponible pour cette date',
    'schedule.noAppointments': 'Aucun rendez-vous',
    // Private
    'private.title': 'Espace privé',
    'private.description': 'Vos données et documents confidentiels.',
    'private.accessButton': 'Accéder à l\'espace privé',
    'private.placeholderMessage': 'Tapez un message sécurisé...',
    'private.documents': 'Documents privés',
    'private.messages': 'Messages sécurisés',
    'private.confidentialReport': 'Rapport confidentiel',
    'private.viewDocument': 'Voir le document',
    'private.documentsDesc': 'Documents et rapports privés',
    'private.messagesDesc': 'Communications chiffrées de bout en bout',
    // Live Analysis
    'live.title': 'Analyse EEG en direct',
    'live.description': 'Surveillance en temps réel des métriques cognitives',
    'live.startSession': 'Démarrer la session',
    'live.pause': 'Pause',
    'live.resume': 'Reprendre la session',
    'live.stopSession': 'Arrêter la session',
    'live.back': 'Retour à l\'accueil',
    'live.sessionProgress': 'Progression de la session',
    'live.recording': 'Enregistrement et analyse en temps réel',
    'live.metricsTimeline': 'Chronologie des métriques en direct',
    'live.generatingReport': 'Génération du rapport d\'analyse',
    'live.processing': 'Veuillez patienter pendant que nous traitons vos données de session et générons des informations',
    // Language Switcher
    'lang.en': 'English',
    'lang.fr': 'Français',
    'lang.rw': 'Ikinyarwanda'
  },
  rw: {
    // Navigation
    'nav.users': 'Abakoresha',
    'nav.roleRequests': 'Ibyifuzo byuruhare',
    'nav.stats': 'Imibare',
    'nav.clinics': 'Ibitaro',
    'nav.billing': 'Ubwishyu',
    'nav.devices': 'Ibikoresho',
    'nav.appointments': 'Gahunda za muganga',
    'nav.logs': 'Amadosiye',
    'nav.dashboard': 'Ibikorwa',
    'nav.analysis': 'Isesengura',
    'nav.liveAnalysis': 'Isesengura mu Gihe cjyane',
    'nav.schedule': 'Gutegura',
    'nav.notifications': 'Imyitwarire',
    'nav.history': 'Amateka',
    'nav.profile': 'Umwirondoro',
    'nav.settings': 'Igenamigambi',
    // Common
    'common.error': 'Ikosa',
    'common.success': 'Ishimiro',
    'common.loading': 'Ikinini...',
    'common.save': 'Kubika',
    'common.cancel': 'Kurekeza',
    'common.delete': 'Gusiba',
    'common.export': 'Kurandika',
    'common.share': 'Gukubiza',
    'common.tomorrow': 'Ejo',
    'common.noData': 'Nta makuru',
    'common.noResults': 'Nta bisubizo',
    'common.confirmAction': 'Wemeza cyane cyane?',
    'common.deleteWarning': 'Iri somo ritarosheka.',
    // Settings
    'settings.title': 'Igenamigambi',
    'settings.description': 'Shyiraho ibyifuzo byawe n\'igenamigambi ry\'ikonto.',
    'settings.password': 'Ijambo ry\'ibinga',
    'settings.currentPassword': 'Ijambo ry\'ibinga ry\'ubwakurikije',
    'settings.newPassword': 'Ijambo ry\'ibinga gishya',
    'settings.confirmPassword': 'Emeza Ijambo ry\'ibinga gishya',
    'settings.changePassword': 'Hindura Ijambo ry\'ibinga',
    'settings.passwordMismatch': 'Ijambo ry\'ibinga rishya ritari kimwe',
    'settings.passwordChanged': 'Ijambo ry\'ibinga ryahinduwe',
    'settings.failedChangePassword': 'Hita mu guhindura ijambo ry\'ibinga',
    'settings.deleteAccount': 'Gusiba Ikonto',
    'settings.deleteAccountWarning': 'Iyi mikorere ntiyimirirwa. Iyi konto izasibwa kugira neza',
    'settings.enterPassword': 'Andika ijambo ryibinga kugira ko emeza',
    'settings.accountDeleted': 'Ikonto yasibwe',
    'settings.failedDeleteAccount': 'Hita mu gusiba ikonto',
    'settings.notifications': 'Imyitwarire',
    'settings.emailNotifications': 'Imyitwarire yibinyamakuru',
    'settings.emailNotificationsDesc': 'Weka imyitwarire kinyamakuru',
    'settings.pushNotifications': 'Imyitwarire y\'amayungurizo',
    'settings.analysisUpdates': 'Imbindukire y\'isesengura',
    'settings.marketingEmails': 'Ibinyamakuru by\'ubwishyu',
    'settings.marketingEmailsDesc': 'Weka ibinyamakuru by\'ubwishyu n\'uko bikora',
    'settings.appearance': 'Uko byerekana',
    'settings.theme': 'Imvugo',
    'settings.fontSize': 'Ingano y\'ibiragufate',
    'settings.reducedMotion': 'Imyumvuko michache',
    'settings.language': 'Ururimi',
    'settings.dateFormat': 'Imvugo y\'amatuku',
    'settings.timeFormat': 'Imvugo y\'igihe',
    'settings.dangerZone': 'Inzira y\'ibyinzira',
    // Login
    'login.welcome': 'Murakaza neza',
    'login.subtitle': 'Injira kumikino yawe',
    'login.forgot': 'Wababaje ijambo ryibinga?',
    'login.signin': 'Injira',
    // Private
    'private.incorrectPassword': 'Ijambo ryibinga ryacu',
    // Register
    'register.title': 'Ubwiyunge',
    'register.subtitle': 'Injira mu isi y\'ubwenge hamwe n\'Ikinzira cy\'Ubwenge',
    // Not Found
    'notfound.return': 'Garuka mu Gihe cjyane',
    'notfound.message': "⚡ Inda! Ikinzira cyo kugaragaza ubwenge bwawe cyamarika mu gihe cjyane. Hatari paje iyi.",
    // History
    'history.title': 'Amateka y\'isesengura',
    'history.description': 'Kora imibare n\'yubwenge bwawe hamwe n\'ibipimo.',
    'history.noSessions': 'Nta sesengura',
    'history.searchPlaceholder': 'Shaka seshoni...',
    // Appointments
    'appointments.title': 'Ibyifuzo bya gahunda ya muganga',
    'appointments.suggest': 'Tegeka Ubukakambwe',
    'appointments.accept': 'Kubwiyemeza',
    'appointments.reject': 'Kwirukanwa',
    'appointments.noAppointments': 'Nta gahunda ya muganga ufite',
    'appointments.accepted': 'Ikibazo cyemezwe',
    'appointments.declined': 'Ikibazo cyakwirukanwa',
    'appointments.failedAccept': 'Hita mu gufata ikibazo',
    'appointments.failedDecline': 'Hita mu gukwirukanwa ikibazo',
    'appointments.email': 'Imeyili',
    // Dashboard
    'dashboard.welcome': 'Murakaza neza,',
    'dashboard.cards.totalAnalyses': 'Isesengura ryose',
    'dashboard.cards.activities': 'Ibikorwa',
    'dashboard.cards.reports': 'Raporo',
    'dashboard.cards.sessions': 'Amaseshoni',
    'dashboard.recent.title': 'Isesengura nyakuri',
    'dashboard.recent.desc': 'Ibisesengura byawe bisesengura ubwenge',
    'dashboard.upcoming.title': 'Seshoni zejyereje',
    'dashboard.upcoming.desc': 'Gukusanya amakuru agateganijwe',
    'dashboard.session': 'Urubuga',
    // Analysis
    'analysis.title': 'Imboneramusharuro y\'isesengura',
    'analysis.description': 'Ohereza ubwenge bwawe cyangwa reba ibisesengura byabanjirije. Ingano ntarenze MB 100 kuri buri idosiye.',
    'analysis.upload': 'Ohereza',
    'analysis.results': 'Ibisesengura',
    'analysis.uploadHeader': 'Ohereza ubwenge bwawe',
    'analysis.uploadDesc': 'Wika no gutera hano, cyangwa kanda kugusikira i rehero',
    'analysis.analyzing': 'Bisesengura...',
    'analysis.selectFiles': 'Hitamo Idosiye',
    'analysis.resultsPlaceholder': 'Ibisesengura byawe biza ku ya.',
    'analysis.submitted': 'Isesengura yoherejwe',
    'analysis.submittedDesc': 'Idosiye yawe isesengura. Ibisesengura bizavuka hano.',
    'analysis.failed': 'Hita mu gukora isesengura',
    // Notifications
    'notifications.title': 'Amatangazo',
    'notifications.description': 'Shyiraho amatangazo n\'ixabugwaho',
    'notifications.markAll': 'Emeza byose',
    'notifications.clearAll': 'Siba byose',
    'notifications.allNotifications': 'Amatangazo yose',
    'notifications.noNotifications': 'Nta matangazo',
    'notifications.caughtUp': 'Ubwakurikije! Garuka hanyuma kugira amahoro.',
    'notifications.filter.type.placeholder': 'Gusangiza kurusozo',
    'notifications.filter.type.all': 'Ibisozo byose',
    'notifications.filter.type.success': 'Ishimiro',
    'notifications.filter.type.error': 'Ikosa',
    'notifications.filter.category.placeholder': 'Gusangiza ku kagari',
    'notifications.markAsRead': 'Emeza ko bisomwe',
    'notifications.markedAsRead': 'Emezwe ko bisomwe',
    'notifications.allMarkedRead': 'Emezwe se ryose ko bisomwe',
    'notifications.deleted': 'Myitwarire yasibwe',
    'notifications.failedFetch': 'Hita mu gukurikira myitwarire',
    'notifications.failedMarkRead': 'Hita mu gufata nk\'isisomwe',
    'notifications.failedMarkAllRead': 'Hita mu gufata se ryose nk\'isisomwe',
    'notifications.failedDelete': 'Hita mu gusiba myitwarire',
    // Profile
    'profile.title': 'Umwirondoro',
    'profile.description': 'Shyiraho amakuru yawe n\'ibyifuzo.',
    'profile.personal': 'Amakuru y\'Umuntu Jye',
    'profile.security': 'Nzira y\'kurinda',
    'profile.account': 'Ikonto',
    'profile.personalInfoTitle': 'Amakuru y\'Umuntu Jye',
    'profile.personalInfoDesc': 'Subiramo amakuru yawe n\'ifoto yumwirondoro',
    'profile.fullName': 'Izina Ryose',
    'profile.username': 'Akabyiniriro',
    'profile.email': 'Ibinyamakuru',
    'profile.avatar': 'Ifoto yumwirondoro',
    'profile.saveChanges': 'Kubika Impindura',
    'profile.remove': 'Siba',
    'profile.changePassword': 'Hindura Ijambo ry\'ibinga',
    'profile.currentPassword': 'Ijambo ry\'ibinga ry\'ubwakurikije',
    'profile.newPassword': 'Ijambo ry\'ibinga gishya',
    'profile.confirmPassword': 'Emeza Ijambo ry\'ibinga gishya',
    'profile.passwordMismatch': 'Ijambo ry\'ibinga rishya ritari kimwe',
    'profile.passwordChanged': 'Ijambo ry\'ibinga ryahinduwe',
    'profile.failedChangePassword': 'Hita mu guhindura ijambo ry\'ibinga',
    'profile.noChanges': 'Nta impindura',
    'profile.updated': 'Umwirondoro wahinduwe',
    'profile.failedUpdate': 'Hita mu guhindura umwirondoro',
    'profile.imageTooLarge': 'Ifoto nkuru cyane, ntarenze MB 5',
    'profile.invalidImage': 'Ohereza ifoto',
    'profile.dangerZone': 'Inzira y\'ibyinzira',
    'profile.deleteAccount': 'Gusiba Ikonto',
    'profile.deleteWarning': 'Iyi mikorere ntiyimirirwa. Iyi konto izasibwa kugira neza',
    'profile.enterPasswordConfirm': 'Andika ijambo ryibinga kugira ko emeza',
    'profile.accountDeleted': 'Ikonto yasibwe',
    'profile.failedDeleteAccount': 'Hita mu gusiba ikonto',
    // Schedule
    'schedule.title': '',
    'schedule.description': 'Tegura kandi ushyireho amasesshoni yawe yo gusesengura EEG',
    'schedule.doctorAvailability': 'Tegeka igihe cy\'umurwayi yakubonera',
    'schedule.failedSlots': 'Hita mu gukurikira ibyo bubakira bitekanishije',
    'schedule.selectAll': 'Hitamo muganga, ubukakambwe, n\'igihe',
    'schedule.requestSuccess': 'Itangazo ryatanzwe neza',
    'schedule.requestFailed': 'Hita mu gutanga Itangazo',
    'schedule.noDoctors': 'Nta muganga',
    'schedule.noSlots': 'Nta bubakira bitekanishije kubirenge',
    'schedule.noAppointments': 'Nta matangazo',
    // Private
    'private.title': 'Ibikorwa',
    'private.description': 'Amakuru na dossiye zawe z\'ubwiyunge.',
    'private.accessButton': 'Injira mu nzira y\'ubwiyunge',
    'private.placeholderMessage': 'Andika ijambo ry\'urinda...',
    'private.documents': 'Dossiye z\'ubwiyunge',
    'private.messages': 'Ujumbe w\'urinda',
    'private.confidentialReport': 'Raporo y\'ubwiyunge',
    'private.viewDocument': 'Reba Dossiye',
    'private.documentsDesc': 'Dossiye n\'raporo z\'ubwiyunge',
    'private.messagesDesc': 'Ubujumbe bwakirije muri roranire',
    // Live Analysis
    'live.title': 'Isesengura mu Gihe cjyane',
    'live.description': 'Kubumva mu gihe cjyane ibibazo bijya mu nshingano',
    'live.startSession': 'Tangira Urubuga',
    'live.pause': 'Hagarika',
    'live.resume': 'Komeza Urubuga',
    'live.stopSession': 'Hagarika Urubuga',
    'live.back': 'Garuka Mu rugo',
    'live.sessionProgress': 'Iterambere ry\'urubuga',
    'live.recording': 'Gufata no bisesengura mu gihe cjyane',
    'live.metricsTimeline': 'Urugo rw\'ibipimo mu gihe cjyane',
    'live.generatingReport': 'Gukora Raporo y\'isesengura',
    'live.processing': 'Tegeka mu gihe tisesengura amakuru yawe n\'gutanga amasugurisho',
    // Language Switcher
    'lang.en': 'English',
    'lang.fr': 'Français',
    'lang.rw': 'Ikinyarwanda'
  }
}

type I18nContextValue = {
  lang: Lang
  t: (key: string) => string
  setLanguage: (l: Lang) => void
  supportedLanguages: readonly Lang[]
}

const I18nContext = createContext<I18nContextValue | null>(null)

export const I18nProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [lang, setLang] = useState<Lang>(() => {
    try {
      const saved = localStorage.getItem('language:settings')
      if (saved) {bytes = ko
        const parsed = JSON.parse(saved)
        if (parsed.language === 'fr' || parsed.language === 'rw') return parsed.language
      }
    } catch (e) {
      // ignore
    }
    return 'en'
  })

  useEffect(() => {
    try {
      const saved = localStorage.getItem('language:settings')
      const parsed = saved ? JSON.parse(saved) : null
      if (!parsed || parsed.language !== lang) {
        localStorage.setItem('language:settings', JSON.stringify({ ...(parsed || {}), language: lang }))
      }
    } catch (e) {
      // ignore
    }
  }, [lang])

  const t = (key: string) => {
    return translations[lang][key] ?? translations['en'][key] ?? key
  }

  const value = useMemo(
    () => ({
      lang,
      t,
      setLanguage: (l: Lang) => setLang(l),
      supportedLanguages: ['en', 'fr', 'rw'] as const
    }),
    [lang]
  )

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>
}

export const useI18n = () => {
  const ctx = useContext(I18nContext)
  if (!ctx) throw new Error('useI18n must be used within I18nProvider')
  return ctx
}

export default I18nProvider